(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{226:function(e,t,n){e.exports=n(424)},231:function(e,t,n){},232:function(e,t,n){},254:function(e,t,n){},386:function(e,t,n){},401:function(e,t,n){},402:function(e,t,n){},403:function(e,t,n){},404:function(e,t,n){},405:function(e,t,n){},406:function(e,t,n){},417:function(e,t,n){},418:function(e,t,n){},424:function(e,t,n){"use strict";n.r(t);var a,r=n(0),o=n.n(r),c=n(8),i=n.n(c),l=(n(231),n(232),n(24)),u=n(22);!function(e){e.SetUser="APP_SET_USER",e.ClearUser="APP_CLEAR_USER",e.SetAuthenticated="APP_SET_AUTHENTICATED",e.Logout="APP_LOGOUT"}(a||(a={}));var s,m=function(e){return{type:a.SetUser,payload:e}},d=Object(l.b)(a.SetAuthenticated),f=Object(l.b)(a.Logout),g=Object(l.b)(a.ClearUser);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b,O={url:null,user:null,isAuthenticated:void 0},y=Object(l.c)(O,(s={},Object(u.a)(s,a.SetUser,(function(e,t){return h({},e,{user:t.payload.user,url:t.payload.url})})),Object(u.a)(s,a.ClearUser,(function(e){return h({},e,{user:null,isAuthenticated:!1})})),Object(u.a)(s,a.SetAuthenticated,(function(e,t){return h({},e,{isAuthenticated:t.payload})})),s)),E=n(43);!function(e){e.Login="LOGIN_LOGIN",e.LoginSuccess="LOGIN_SUCCESS",e.SetError="LOGIN_SET_ERROR"}(b||(b={}));var j,v=Object(l.b)(b.Login),k=Object(l.b)(b.LoginSuccess),w=Object(l.b)(b.SetError);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P,I=Object(l.c)({isLoggingIn:!1,error:null},(j={},Object(u.a)(j,b.Login,(function(e){return _({},e,{isLoggingIn:!0})})),Object(u.a)(j,b.LoginSuccess,(function(e){return _({},e,{isLoggingIn:!1})})),Object(u.a)(j,b.SetError,(function(e,t){return _({},e,{error:t.payload,isLoggingIn:!1})})),j));!function(e){e.LoadWorklogs="WORKLOGS_LOAD",e.LoadedWorklogs="WORKLOGS_LOADED",e.LoadedHolidays="WORKLOG_HOLIDAYS_LOADED",e.ErrorLoadingWorklogs="WORKLOGS_ERROR"}(P||(P={}));var L,D=Object(l.b)(P.LoadWorklogs),N=Object(l.b)(P.LoadedWorklogs),C=Object(l.b)(P.ErrorLoadingWorklogs),A=Object(l.b)(P.LoadedHolidays);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F=Object(l.c)({isFetchingWorklogs:!1,month:null,year:null,day:null,user:null,worklogs:null,holidays:[],error:null},(L={},Object(u.a)(L,P.LoadWorklogs,(function(e,t){return T({},e,{user:t.payload.user,month:t.payload.month,year:t.payload.year,day:t.payload.day,isFetchingWorklogs:!0,error:null})})),Object(u.a)(L,P.LoadedWorklogs,(function(e,t){return T({},e,{worklogs:t.payload,isFetchingWorklogs:!1})})),Object(u.a)(L,P.ErrorLoadingWorklogs,(function(e,t){return T({},e,{error:t.payload,isFetchingWorklogs:!1})})),Object(u.a)(L,P.LoadedHolidays,(function(e,t){return T({},e,{holidays:t.payload.holidays})})),L)),R=Object(E.combineReducers)({appState:y,login:I,worklogs:F}),Y=n(23),x=n(30),U=n.n(x),M=function(){return U.a.get("/api/users/current")},K=function(e){return function(t){t(v()),function(e){return U.a.post("/api/users/authenticate",e)}(e).then((function(){return t(k()),M()})).then((function(e){t(m(e.data)),t(d(!0))})).catch((function(e){t(w(e.response&&e.response.status))}))}},H=function(){return function(e){e(f()),U.a.post("api/users/logout").then((function(){return e(g())}))}},V=n(79),G=n(65),q=(n(254),n(432)),z=n(431),J=n(437),B=n(9),Z=n(72),Q=n(426),X=n(439),$=n(64),ee=q.a.Text,te=z.a.create({name:"login"})((function(e){var t=e.onSubmit,n=e.isLoggingIn,a=e.loginError,r=e.form,c=r.getFieldDecorator;return o.a.createElement(z.a,{onSubmit:function(e){e.preventDefault(),r.validateFields((function(e,n){e||t(n)}))}},o.a.createElement(z.a.Item,null,c("email",{rules:[{required:!0,message:"Please input your email"}]})(o.a.createElement(J.a,{placeholder:"Email",prefix:o.a.createElement(B.a,{type:"user"}),suffix:o.a.createElement(Z.a,{title:"Please input your jira account email"},o.a.createElement(B.a,{type:"info-circle"}))}))),o.a.createElement(z.a.Item,null,c("url",{rules:[{required:!0,message:"Please input URL"}]})(o.a.createElement(J.a,{addonBefore:"https://",placeholder:"URL",suffix:o.a.createElement(Z.a,{title:"Please enter your jira instance url - ex. www.atlassian.com"},o.a.createElement(B.a,{type:"info-circle"}))}))),o.a.createElement(z.a.Item,null,c("apiToken",{rules:[{required:!0,message:"Please input token"}]})(o.a.createElement(J.a,{placeholder:"API Token",suffix:o.a.createElement(Q.a,{content:o.a.createElement("span",null,"To generate API token for this app go to",o.a.createElement("a",{className:"jira-link",href:"https://id.atlassian.com/manage-profile/security/api-tokens",target:"_blank",rel:"noopener noreferrer"},"https://id.atlassian.com/manage-profile/security/api-tokens"))},o.a.createElement(B.a,{type:"info-circle"}))}))),o.a.createElement(z.a.Item,null,c("rememberMe",{valuePropName:"checked",initialValue:!0})(o.a.createElement(X.a,null,"Remember me"))),o.a.createElement($.a,{loading:n,type:"primary",htmlType:"submit",className:"login-form__button"},"Log in"),a&&o.a.createElement("div",{className:"login-form__error"},o.a.createElement(ee,{type:"danger"},"Incorrect login data")))})),ne=n(427),ae=n(87),re=n(47),oe=n(429),ce=(n(386),function(){var e=Object(Y.c)(),t=Object(Y.d)((function(e){return e.appState.isAuthenticated})),n=Object(Y.d)((function(e){return e.login.isLoggingIn})),a=Object(Y.d)((function(e){return e.login.error}));return t?o.a.createElement(G.a,{to:{pathname:"dashboard"}}):o.a.createElement(ne.a,{style:{height:"100%"}},o.a.createElement(ne.a.Content,{style:{padding:"50px 50px"}},o.a.createElement(ae.a,{className:"login__card-wrapper"},o.a.createElement(re.a,{md:{span:12,offset:6},xl:{span:8,offset:8}},o.a.createElement(oe.a,{className:"login__card"},o.a.createElement("h2",null,"Sign in"),o.a.createElement(te,{onSubmit:function(t){return K(t)(e)},isLoggingIn:n,loginError:a}))))))}),ie=n(59),le=n(438),ue=n(37),se=n(11),me=n.n(se),de=function(e){var t=e.from,n=e.to,a=e.user,r=function(e){var t=e.from,n=e.to;return{from:me()(t).format("YYYY-MM-DD"),to:me()(n).format("YYYY-MM-DD")}}({from:t,to:n});return U.a.get("/api/worklogs?from=".concat(r.from,"&to=").concat(r.to,"&accountId=").concat(a.accountId))},fe=n(127),ge=n(128);function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var he=new(function(){function e(t){Object(fe.a)(this,e),this.storage=t}return Object(ge.a)(e,[{key:"save",value:function(e,t){var n=this.stringifyKey(e),a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.readStorage(),Object(u.a)({},n,t));this.storage.setItem("HOLIDAYS",JSON.stringify(a))}},{key:"get",value:function(e){return this.readStorage()[this.stringifyKey(e)]}},{key:"stringifyKey",value:function(e){return"".concat(e.country,"-").concat(e.month,"-").concat(e.year)}},{key:"readStorage",value:function(){var e=this.storage.getItem("HOLIDAYS");return e?JSON.parse(e):{}}}]),e}())(localStorage),be=function(e){return function(t){var n=e.from.getMonth(),a=e.from.getFullYear();t(D({user:e.user,month:n,year:a})),function(e){var t=he.get(e);if(!Object(ue.isNil)(t))return Promise.resolve(t);var n=Object(ue.mapValues)(e,(function(e){return e.toString()})),a=new URLSearchParams(n);return U.a.get("api/holidays",{params:a}).then((function(t){var n=t.data;return he.save(e,n),n}))}({country:"pl",month:n+1,year:a}).then((function(e){return t(A({holidays:e}))})),de(e).then((function(e){t(N(e.data))})).catch((function(){t(C())}))}},Oe=n(169),ye=n.n(Oe),Ee=function(e){return{from:e.startOf("month").toDate(),to:e.endOf("month").toDate()}};var je=n(428),ve=n(435),ke=n(223),we=n(214),Se=n(224),_e=n(57),Pe=n(216),Ie=function(e){return U.a.get("/api/issues",{params:{query:e}})},Le=function(e){function t(e){var n;return Object(fe.a)(this,t),(n=Object(ke.a)(this,Object(we.a)(t).call(this,e))).state={data:[],value:"",fetching:!1},n.fetchId=0,n.fetchIssues=function(e){if(e){n.setState({data:[],fetching:!0}),n.fetchId+=1;var t=n.fetchId;Ie(e).then((function(e){if(t===n.fetchId){var a=e.data;n.setState({data:a,fetching:!1})}}))}},n.handleChange=function(e){var t=n.state.data.find((function(t){return Number(t.id)===Number(e)})),a="";t&&(a="".concat(t.key," - ").concat(t.summaryText)),n.setState({value:a,data:[],fetching:!1}),n.props.onChange&&n.props.onChange(t)},n.fetchIssues=Object(ue.debounce)(n.fetchIssues,500),n}return Object(Se.a)(t,e),Object(ge.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"user__search"},o.a.createElement(_e.a,{showSearch:!0,style:{width:"100%"},placeholder:"Select issue",value:this.state.value,onSearch:this.fetchIssues,onChange:this.handleChange,showArrow:!1,filterOption:!1,defaultActiveFirstOption:!1,notFoundContent:this.state.fetching?o.a.createElement(Pe.a,{size:"small"}):null},this.state.data.map((function(e){return o.a.createElement(_e.a.Option,{key:e.id},e.key," - ",e.summaryText)}))))}}]),t}(o.a.Component),De={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},Ne=function(e){var t=e.form,n=e.initialDate,a=e.initialHours,c=e.initialMinutes,i=e.validationPassed,l=e.onChange,u=t.getFieldDecorator;return Object(r.useEffect)((function(){t.resetFields(["started","minutes","hours"])}),[n,a,c]),o.a.createElement(z.a,{onChange:l},o.a.createElement(z.a.Item,Object.assign({label:"Issue"},De),u("issue",{rules:[{required:!0,message:"Please select issue"}]})(o.a.createElement(Le,null))),o.a.createElement(z.a.Item,Object.assign({label:"Started at"},De),u("started",{rules:[{required:!0,message:"Please select date"}],initialValue:n.clone().hour(12).minute(0).second(0)})(o.a.createElement(je.a,{showTime:!0}))),o.a.createElement(z.a.Item,{label:"Hours",labelCol:{sm:4},wrapperCol:{sm:4}},u("hours",{rules:[{required:!0,message:"Please select date"}],initialValue:a})(o.a.createElement(ve.a,{min:0,max:24}))),o.a.createElement(z.a.Item,{label:"Minutes",labelCol:{sm:4},wrapperCol:{sm:4}},u("minutes",{rules:[{required:!0,message:"Please select date"}],initialValue:c})(o.a.createElement(ve.a,{min:0,max:59}))),i?"":o.a.createElement(q.a.Text,{type:"danger"},"Minutes or hours need to be provided"))},Ce=n(433),Ae=function(e){return We(Te(e))},We=function(e){var t=e.minutes,n=e.hours,a=t<10?"0".concat(t):"".concat(t);return"".concat(n,":").concat(a)},Te=function(e){return{hours:Math.floor(e/3600),minutes:e/60%60}},Fe=z.a.create()((function(e){var t=e.selectedDate,n=e.modalVisible,a=e.timeLoggedForSelectedDate,c=e.onHideModal,i=e.onAdded,l=e.form,u=Object(r.useState)(!1),s=Object(ie.a)(u,2),m=s[0],d=s[1],f=Object(r.useState)(!0),g=Object(ie.a)(f,2),p=g[0],h=g[1],b=function(){var e=l.getFieldValue("minutes"),t=l.getFieldDecorator("hours");h(!!(e||t))},O=function(e){var t=28800-e;return t<0?{hours:0,minutes:0}:Te(t)}(a),y=O.hours,E=O.minutes;return o.a.createElement(Ce.a,{title:"Log Time",visible:n,confirmLoading:m,onCancel:c,onOk:function(){b(),l.validateFields((function(e){if(!e&&p){d(!0);var t=function(e){var t=e.issue,n=e.started,a=e.hours,r=e.minutes;return{issueId:t.id,started:n.format(),timeSpent:3600*a+60*r}}(l.getFieldsValue());(n=t,U.a.post("api/worklogs",n)).then((function(){d(!1),i()}))}var n}))}},o.a.createElement(Ne,{form:l,initialDate:t,initialHours:y,initialMinutes:E,validationPassed:p,onChange:function(){b()}}))})),Re=n(430),Ye=(n(401),n(402),function(e){var t=e.date,n=e.totalLoggedTime;return o.a.createElement("div",{className:"details__title"},o.a.createElement("span",null,t.format("ll")),o.a.createElement("span",null,Ae(n)))}),xe=function(e){return e?Ke(e)?Ue(e):Me(e):0},Ue=function(e){return e.reduce((function(e,t){return e+t.worklogs.reduce((function(e,t){return e+t.timeSpentSeconds}),0)}),0)},Me=function(e){return e.reduce((function(e,t){return e+t.timeSpent}),0)},Ke=function(e){var t=e[0];return!!t&&t.worklogs instanceof Array},He=function(e,t){return"https://".concat(e,"/browse/").concat(t)},Ve=function(e){var t=e.jiraUrl,n=e.selectedDate,a=e.worklogs,r=e.canEdit,c=e.onWorklogDeleted,i=xe(a),l=function(e){Ce.a.confirm({title:"Do you want to remove worklog?",content:"Confirm removing worklog from issue ".concat(e.issueKey," logged at ").concat(me()(e.started).format("lll"),". Time that was logged: ").concat(Ae(e.timeSpent)),onOk:function(){return function(e){var t=e.worklogId,n=e.issueId;return U.a.delete("/api/worklogs/".concat(n,"/").concat(t))}({worklogId:e.id,issueId:e.issueId}).then(c).catch((function(){return le.a.error("Could not delete worklog")}))},onCancel:function(){}})};return o.a.createElement(oe.a,{className:"details-sider",title:Ye({date:n,totalLoggedTime:i})},o.a.createElement(Re.a,{header:o.a.createElement("div",{className:"list__header"},o.a.createElement("b",null,"Logged Issues:")),dataSource:a,renderItem:function(e){return o.a.createElement(Re.a.Item,null,o.a.createElement(Re.a.Item.Meta,{title:o.a.createElement("div",{className:"worklog-list__title"},o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:He(t,e.issueKey)},e.issueKey),r?o.a.createElement($.a,{onClick:function(){return l(e)},icon:"delete",size:"small"}):""),description:o.a.createElement("div",{className:"issue__description"},o.a.createElement("span",null,"Started at: ",o.a.createElement("b",null,me()(e.started).format("lll"))),o.a.createElement("span",null,"Logged: ",o.a.createElement("b",null,Ae(e.timeSpent))))}))}}))},Ge=(n(403),n(73));function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Je=function(e,t){return e?e.reduce((function(e,n){return function(e,t){var n=Object.assign({},e);return Object.keys(t).reduce((function(e,n){var a=t[n],r=e[n]||[],o=[].concat(Object(Ge.a)(r),Object(Ge.a)(a));return ze({},e,Object(u.a)({},n,o))}),n)}(e,n.worklogs.reduce((function(e,a){var r=function(e,t){return ye.a.tz(ye()(e),t)}(a.started,t).format("YYYY-MM-DD"),o=e[r]||[],c=[].concat(Object(Ge.a)(o),[{id:a.id,issueId:a.issueId,issueKey:n.issueKey,timeSpent:a.timeSpentSeconds,started:a.started}]);return ze({},e,Object(u.a)({},r,c))}),{}))}),{}):{}},Be=n(436),Ze=n(434),Qe=(n(404),function(e){return function(t){var n=t.name.find((function(t){return t.lang===e}));return n&&n.text}}),Xe=q.a.Text,$e=function(e,t,n){return function(a){var r=a.format("YYYY-MM-DD"),c=e[r],i=c&&c.reduce((function(e,t){return e+t.timeSpent}),0),l=28800===i,u=n(a);return o.a.createElement("div",{className:function(){var e=["ant-fullcalendar-date"];return 7!==a.isoWeekday()&&Object(ue.isNil)(u)?function(e){return 6===e.isoWeekday()}(a)&&(e=[].concat(Object(Ge.a)(e),["calendar-saturday"])):e=[].concat(Object(Ge.a)(e),["calendar-holiday"]),e.join(" ")}()},o.a.createElement("div",{className:"ant-fullcalendar-value callendar-cell__header"},o.a.createElement("span",{className:"callendar-cell__total-time"},u&&o.a.createElement(Xe,{type:"danger"},function(e){var t=Qe("pl"),n=Qe("en");return t(e)||n(e)||""}(u)),c&&o.a.createElement(Xe,{type:l?void 0:"warning"},"Total: ",Ae(i)," ")),o.a.createElement("span",{className:"callendar-cell__day"},a.date())),o.a.createElement("div",{className:"ant-fullcalendar-content"},c&&o.a.createElement("div",null,o.a.createElement("ul",{className:"worklogs"},c.map((function(e,n){return o.a.createElement("li",{className:"worklog-list-item",key:"".concat(e.issueKey,"_").concat(n)},o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:He(t,e.issueKey)},e.issueKey),o.a.createElement("span",null,Ae(e.timeSpent)))}))))))}},et=(n(405),n(406),n(82)),tt=n.n(et),nt=function(e){return function(t){var n;e({data:[],fetching:!0}),t&&(n=t,U.a.get("/api/users/search",{params:{query:n}})).then((function(e){return e.data})).then((function(t){e({data:t,fetching:!1})}))}},at=function(e){var t=e.user,n=e.onUserSelect,a=Object(r.useState)({data:[],value:t.displayName,fetching:!1}),o=Object(ie.a)(a,2),c=o[0],i=o[1],l=tt()(nt(i),800);return r.createElement("div",{className:"user__search"},r.createElement(_e.a,{showSearch:!0,style:{width:"100%"},placeholder:"Select user",value:c.value,onSearch:l,onChange:function(e){var t=c.data.find((function(t){return t.accountId===e}));i({value:t&&t.displayName,data:[],fetching:!1}),t&&n(t)},showArrow:!1,filterOption:!1,defaultActiveFirstOption:!1,notFoundContent:c.fetching?r.createElement(Pe.a,{size:"small"}):null},c.data.map((function(e){return r.createElement(_e.a.Option,{key:e.accountId},e.displayName)}))))},rt=function(e){var t=e.url,n=e.isFetchingWorklogs,a=e.worklogs,r=e.selectedDate,c=e.totalLoggedTime,i=e.userWorklogs,l=e.holidays,u=e.onAddWorklogClick,s=e.onViewChanged,m=e.onRefresh,d=function(e){e&&s(e,i)},f=$e(a,t,function(e){return function(t){var n=t.month()+1,a=t.year(),r=t.date();return e.find((function(e){var t=e.date;return t.day===r&&t.month===n&&a===t.year}))||null}}(l));return o.a.createElement(Pe.a,{spinning:n},o.a.createElement("div",{className:"worklog-calendar__header"},o.a.createElement("div",{className:"worklog-calendar__total-summary"},o.a.createElement(Be.a,{title:"Total logged:",value:Ae(c)})),o.a.createElement($.a,{type:"primary",icon:"plus-circle",className:"worklog-calendar__button-add",onClick:u},"Add"),o.a.createElement("div",{className:"worklog-calendar__user"},o.a.createElement(at,{user:i,onUserSelect:function(e){e.accountId!==i.accountId&&s(r,e)}})),o.a.createElement($.a.Group,null,o.a.createElement($.a,{type:"primary",onClick:function(){var e=r.clone().subtract(1,"month");d(e)}},o.a.createElement(B.a,{type:"left"}),"Backward"),o.a.createElement($.a,{type:"primary",onClick:m},o.a.createElement(B.a,{type:"sync"}),"Refresh"),o.a.createElement($.a,{type:"primary",onClick:function(){var e=r.clone().add(1,"month");d(e)}},"Forward",o.a.createElement(B.a,{type:"right"})))),o.a.createElement(Ze.a,{value:r,onChange:d,dateFullCellRender:f}))},ot=function(e){var t=e.month,n=e.year,a=e.day;return Object(ue.isNil)(t)||Object(ue.isNil)(n)||Object(ue.isNil)(a)?me()():me()([n,t,a])},ct=function(){var e=Object(Y.c)(),t=function(t,n,a){be({from:t,to:n,user:a})(e)},n=Object(G.g)(),a=new URLSearchParams(Object(G.h)().search),c=Object(Y.d)((function(e){return e.worklogs.isFetchingWorklogs})),i=Object(Y.d)((function(e){return e.appState.user})),l=Object(Y.d)((function(e){return e.appState.url}))||"",u=Object(Y.d)((function(e){var t=e.appState.user;return t&&t.timeZone})),s=Object(Y.d)((function(e){return e.worklogs.error})),m=Object(Y.d)((function(e){return e.worklogs})),d=m.worklogs,f=m.month,g=m.year,p=m.day,h=m.user,b=m.holidays,O=Je(d,u),y=xe(d),E=Object(r.useState)(ot({month:f,year:g,day:p})),j=Object(ie.a)(E,2),v=j[0],k=j[1],w=Object(r.useState)(!1),S=Object(ie.a)(w,2),_=S[0],P=S[1];Object(r.useEffect)((function(){s&&le.a.error("Could not fetch worklogs. Please try again.")})),Object(r.useEffect)((function(){var e=Ee(ot({year:a.get("year"),month:a.get("month"),day:a.get("day")})),n=e.from,r=e.to,o=a.get("user");o?function(e){var t=encodeURIComponent(e);return U.a.get("/api/users/".concat(t))}(o).then((function(e){var a=e.data;t(n,r,a)})).catch((function(){le.a.error("Could not fetch user with accountID: ".concat(o))})):t(n,r,i)}),[]);var I=function(){if(h){var e=Ee(v),n=e.from,a=e.to;t(n,a,h)}},L=function(){P(!1)},D=O[v.format("YYYY-MM-DD")]||[],N=xe(D);return o.a.createElement("div",{className:"home"},Object(ue.isNil)(h)||Object(ue.isNil)(f)||Object(ue.isNil)(g)?"":o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"home__container"},o.a.createElement("div",{className:"home__content"},o.a.createElement(rt,{url:l,holidays:b,userWorklogs:h,isFetchingWorklogs:c,selectedDate:v,onViewChanged:function(e,a){k(e);var r=e.year(),o=e.month();if(function(e){var t=new URLSearchParams;Object.entries(e).forEach((function(e){var n=Object(ie.a)(e,2),a=n[0],r=n[1];return t.set(a,r.toString())})),n.push("?".concat(t.toString()))}({year:r,month:o,day:e.date(),user:a.accountId}),o!==f||r!==g||(h&&h.accountId)!==a.accountId){var c=Ee(me()([r,o])),i=c.from,l=c.to;t(i,l,a)}},onAddWorklogClick:function(){P(!0)},onRefresh:I,worklogs:O,totalLoggedTime:y})),o.a.createElement("div",{className:"home__sider"},o.a.createElement(Ve,{jiraUrl:l,selectedDate:v,worklogs:D,canEdit:(h&&h.accountId)===i.accountId,onWorklogDeleted:I}))),o.a.createElement(Fe,{selectedDate:v,modalVisible:_,timeLoggedForSelectedDate:N,onHideModal:L,onAdded:function(){I(),L()}})))},it=n(220),lt=(n(417),n(440)),ut=n(130),st=(n(418),function(e){var t=e.user,n=e.onLogout,a=e.children;return o.a.createElement(lt.a,{theme:"dark",mode:"horizontal",className:"user-info__menu",selectable:!1},o.a.createElement(ut.a,{title:o.a.createElement("span",null,o.a.createElement(B.a,{type:"user"}),t.displayName)},o.a.createElement(lt.a.Item,{disabled:!0},o.a.createElement("img",{alt:"avatar",src:t.avatarUrls["32x32"],className:"user-info__avatar"}),t.emailAddress),o.a.createElement(lt.a.Item,{disabled:!0},"Timezone: ",t.timeZone),o.a.createElement(lt.a.Item,{onClick:n},o.a.createElement(B.a,{type:"logout"}),"Logout")),a&&o.a.createElement(lt.a.Item,{className:"user-info__extras"},a))}),mt=ne.a.Header,dt=ne.a.Content,ft=function(e){var t=e.children,n=Object(Y.c)(),a=Object(Y.d)((function(e){return e.appState.user}));return o.a.createElement(ne.a,{className:"main-layout"},o.a.createElement(mt,{className:"main-layout__header"},o.a.createElement(st,{user:a,onLogout:function(){return n(H())}},o.a.createElement("a",{href:"https://github.com/iczajkow/jira-web-timesheet",target:"_blank",rel:"noopener noreferrer"},o.a.createElement(B.a,{type:"github",style:{fontSize:"24px"}})))),o.a.createElement(dt,{className:"main-layout__content"},t))},gt=function(e){var t=e.children,n=Object(it.a)(e,["children"]),a=Object(Y.d)((function(e){return e.appState.isAuthenticated}));return o.a.createElement(G.b,Object.assign({},n,{render:function(e){var n=e.location;return a?o.a.createElement(ft,null,t):o.a.createElement(G.a,{to:{pathname:"/login",state:{from:n}}})}}))},pt=function(){return o.a.createElement(V.a,null,o.a.createElement(G.d,null,o.a.createElement(G.b,{path:"/login"},o.a.createElement(ce,null)),o.a.createElement(gt,{path:"/dashboard"},o.a.createElement(ct,null)),o.a.createElement(G.b,{path:"*"},o.a.createElement(G.a,{to:{pathname:"dashboard"}}))))},ht={checkAuthenticationConnect:function(){return function(e){M().then((function(t){e(m(t.data)),e(d(!0))})).catch((function(){e(d(!1))}))}}},bt=Object(Y.b)((function(e){return{isAuthenticated:e.appState.isAuthenticated}}),ht)((function(e){var t=e.checkAuthenticationConnect,n=e.isAuthenticated;return o.a.useEffect((function(){t()}),[]),null!=n?o.a.createElement(pt,null):null})),Ot=n(14),yt=(n(419),n(221)),Et=n.n(yt),jt=function(e){var t=e.dispatch;U.a.interceptors.response.use(void 0,(function(e){return 401===e.response.status&&t(g()),Promise.reject(e)}))},vt=Object(l.a)({reducer:R});jt(vt);var kt=function(){return o.a.createElement(Ot.b,{locale:Et.a},o.a.createElement(Y.a,{store:vt},o.a.createElement(bt,null)))};i.a.render(o.a.createElement(kt,null),document.getElementById("root"))}},[[226,1,2]]]);
//# sourceMappingURL=main.72d2b68d.chunk.js.map